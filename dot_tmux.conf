# Enable mouse support
set -g mouse on

# Set terminal
set -g default-terminal "xterm-ghostty"

# Server option
set -s set-clipboard external

# Enable passthrough
set -g allow-passthrough on

# Terminal features
set -as terminal-features ",*:RGB,clipboard"

# RADICAL: Write OSC52 directly to client TTY
bind-key -T copy-mode MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel \
  "sh -c 'b64=\$(cat | base64 -w0); printf \"\\033]52;c;%s\\a\" \"\$b64\" > \$(tmux display-message -p \"#{client_tty}\")'"

bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-pipe-and-cancel \
  "sh -c 'b64=\$(cat | base64 -w0); printf \"\\033]52;c;%s\\a\" \"\$b64\" > \$(tmux display-message -p \"#{client_tty}\")'"
