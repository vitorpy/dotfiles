# Sway configuration
# Read `man 5 sway` for reference

### Variables
# Logo key (Mod4 = Super/Windows key)
set $mod Mod4

# Programs
set $term ghostty
set $filemanager nautilus
set $menu wofi --show drun
set $browser firefox

# Directions (vim-style)
set $left h
set $down j
set $up k
set $right l

### Output configuration (Monitors)
# See `man 5 sway-output` for more information
output DP-3 mode 3840x2160@60Hz pos 0 0 scale 1
output eDP-1 mode 2256x1504@60Hz pos 0 0 scale 1

# Wallpaper
output * bg /home/vitorpy/Pictures/ashinoko_lake-wallpaper-2736x1824.jpg fill

### Idle configuration
exec swayidle -w \
    timeout 150 'brightnessctl -s set 10' \
         resume 'brightnessctl -r' \
    timeout 150 'brightnessctl -sd rgb:kbd_backlight set 0' \
         resume 'brightnessctl -rd rgb:kbd_backlight' \
    timeout 300 'swaylock -f -C ~/.config/sway/swaylock.conf' \
    timeout 330 'swaymsg "output * dpms off"' \
         resume 'swaymsg "output * dpms on" && brightnessctl -r' \
    timeout 1800 'systemctl suspend' \
    before-sleep 'swaylock -f -C ~/.config/sway/swaylock.conf'

# Lock screen (handled by swayidle, see above)

### Input configuration
# Keyboard
input type:keyboard {
    xkb_layout pl,us
    xkb_variant ,intl
    xkb_options grp:alt_shift_toggle
}

# Touchpad
input type:touchpad {
    dwt enabled
    tap enabled
    natural_scroll enabled
    click_method clickfinger
}

# Specific device (Logitech Pebble Mouse)
input "1133:16511:Logitech_Pebble_Mouse" {
    natural_scroll enabled
}

### Appearance
# Font
font pango:Noto Sans 10

# Colors (Zenburn-inspired)
# class                 border  backgr. text    indicator child_border
client.focused          #8faf9f #8faf9f #1f1f1f #8faf9f   #8faf9f
client.focused_inactive #4f4f4f #3f3f3f #dcdccc #4f4f4f   #4f4f4f
client.unfocused        #4f4f4f #3f3f3f #dcdccc #4f4f4f   #4f4f4f
client.urgent           #cc9393 #cc9393 #1f1f1f #cc9393   #cc9393

# Gaps
gaps inner 5
gaps outer 20

# Borders
default_border pixel 2
default_floating_border pixel 2

# Hide title bars (cleaner look)
titlebar_border_thickness 0
titlebar_padding 0

### Window rules
# No borders for specific apps
for_window [app_id="firefox"] border pixel 0
for_window [app_id="chromium"] border pixel 0
for_window [app_id="org.gnome.*"] border pixel 0
for_window [app_id="org.telegram.desktop.*"] border pixel 0
for_window [class="codium"] border pixel 0
for_window [app_id="com.mitchellh.ghostty"] border pixel 0
for_window [class="Jan"] border pixel 0

# Fix for dragging XWayland windows
for_window [shell="xwayland"] title_format "%title [XWayland]"

### Key bindings
# Start a terminal
bindsym $mod+q exec $term

# Kill focused window
bindsym $mod+c kill

# Start launcher
bindsym $mod+r exec $menu

# File manager
bindsym $mod+e exec $filemanager

# Browser
bindsym $mod+b exec $browser

# Screenshot (using grim + slurp)
bindsym Print exec grim -g "$(slurp)" - | wl-copy

# Lock screen
bindsym $mod+l exec swaylock -f -C ~/.config/sway/swaylock.conf

# Switch keyboard layout
bindsym $mod+space exec swaymsg input type:keyboard xkb_switch_layout next

# Reload configuration
bindsym $mod+Shift+c reload

# Exit sway
bindsym $mod+m exec swaynag -t warning -m 'Exit Sway?' -B 'Yes' 'swaymsg exit'

# Move focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# Alternative: vim keys
bindsym $mod+$left focus left
bindsym $mod+$down focus down
bindsym $mod+$up focus up
bindsym $mod+$right focus right

# Move windows
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# Alternative: vim keys
bindsym $mod+Shift+$left move left
bindsym $mod+Shift+$down move down
bindsym $mod+Shift+$up move up
bindsym $mod+Shift+$right move right

# Switch workspaces
bindsym $mod+1 workspace number 1
bindsym $mod+2 workspace number 2
bindsym $mod+3 workspace number 3
bindsym $mod+4 workspace number 4
bindsym $mod+5 workspace number 5
bindsym $mod+6 workspace number 6
bindsym $mod+7 workspace number 7
bindsym $mod+8 workspace number 8
bindsym $mod+9 workspace number 9
bindsym $mod+0 workspace number 10

# Move window to workspace
bindsym $mod+Shift+1 move container to workspace number 1
bindsym $mod+Shift+2 move container to workspace number 2
bindsym $mod+Shift+3 move container to workspace number 3
bindsym $mod+Shift+4 move container to workspace number 4
bindsym $mod+Shift+5 move container to workspace number 5
bindsym $mod+Shift+6 move container to workspace number 6
bindsym $mod+Shift+7 move container to workspace number 7
bindsym $mod+Shift+8 move container to workspace number 8
bindsym $mod+Shift+9 move container to workspace number 9
bindsym $mod+Shift+0 move container to workspace number 10

# Scratchpad
bindsym $mod+s scratchpad show
bindsym $mod+Shift+s move scratchpad

# Layout modes
bindsym $mod+v floating toggle
bindsym $mod+f fullscreen toggle

# Split orientation
bindsym $mod+j split toggle

# Pseudo-tiling (tabbed/stacked modes)
bindsym $mod+w layout tabbed
bindsym $mod+x layout stacking
bindsym $mod+z layout toggle split

# Toggle focus between tiling and floating
bindsym $mod+Shift+v focus mode_toggle

# Move between monitors
bindsym $mod+Shift+n move container to output right
bindsym $mod+Shift+p move container to output left

# Navigate workspaces on current output
bindsym $mod+Control+Left workspace prev_on_output
bindsym $mod+Control+Right workspace next_on_output

# Resize mode
mode "resize" {
    bindsym Left resize shrink width 10px
    bindsym Down resize grow height 10px
    bindsym Up resize shrink height 10px
    bindsym Right resize grow width 10px

    # Vim keys
    bindsym $left resize shrink width 10px
    bindsym $down resize grow height 10px
    bindsym $up resize shrink height 10px
    bindsym $right resize grow width 10px

    # Return to normal mode
    bindsym Return mode "default"
    bindsym Escape mode "default"
    bindsym $mod+r mode "default"
}
bindsym $mod+Ctrl+r mode "resize"

# Drag windows with mouse
floating_modifier $mod normal

# Multimedia keys
bindsym XF86AudioRaiseVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindsym XF86AudioLowerVolume exec wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindsym XF86AudioMute exec wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindsym XF86AudioMicMute exec wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle
bindsym XF86MonBrightnessUp exec brightnessctl s 10%+
bindsym XF86MonBrightnessDown exec brightnessctl s 10%-

# Media player controls (requires playerctl)
bindsym XF86AudioNext exec playerctl next
bindsym XF86AudioPause exec playerctl play-pause
bindsym XF86AudioPlay exec playerctl play-pause
bindsym XF86AudioPrev exec playerctl previous

### Autostart applications
exec_always --no-startup-id waybar
exec --no-startup-id /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec --no-startup-id dbus-update-activation-environment --all
exec --no-startup-id gnome-keyring-daemon --start --components=secrets,ssh,pkcs11
exec --no-startup-id nm-applet --indicator
exec --no-startup-id libinput-gestures

# XDG Desktop Portal (for screen sharing, etc.)
exec dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP=sway

# Alternative: Sway's built-in bar (uncomment if you want to replace waybar)
# bar {
#     position top
#     status_command while date +'%Y-%m-%d %H:%M:%S %p'; do sleep 1; done
#
#     colors {
#         statusline #dcdccc
#         background #3f3f3f
#         inactive_workspace #3f3f3f #3f3f3f #dcdccc
#         active_workspace #8faf9f #8faf9f #1f1f1f
#         focused_workspace #8faf9f #8faf9f #1f1f1f
#         urgent_workspace #cc9393 #cc9393 #1f1f1f
#     }
# }

### Include additional configs
include /etc/sway/config.d/*
include ~/.config/sway/config.d/*
